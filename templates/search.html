{% extends "base.html" %}

{% block title %}Search | Baseball{% endblock %}

{% block content %}

    <h1>Search info on teams</h1>


    <form method="post">
        <label for="team_name">Team Name:</label>
        <select id="team_name" name="team_name">
            {% for team in teams %}
                <option value="{{ team }}">{{ team }}</option>
            {% endfor %}
        </select><br><br>

        <label for="year">Year:</label>
        <select id="year" name="year">
            {% for year in years %}
                <option value="{{ year }}">{{ year }}</option>
            {% endfor %}
        </select><br><br>

        <button type="submit">Swing!</button>
    </form>


    {%  if team %}

    <h3>
    in {{ team.years }} , the {{ team.team_name }} had {{ team.wins }} wins and {{ team.losses }} losses.
     They scored a total of {{ team.team_hr }} home runs for the season.

       Their home ballpark for {{ team.years }} was {{ team.park }}.
        They had {{ team.attendance }} people attend their home games.
    </h3>

     <h2>Batting Stats</h2>
        <h2>Pitching Stats</h2>

    {% endif %}

    <script>
    document.getElementById('team_name').addEventListener('change', function(e) {
        const team = this.value;
        const year_select = document.getElementById('year');

        year_select.innerHTML = '' ;

        if (team){
            fetch(`get_years/${team}`)
            .then(res => res.json())
            .then(data => {
                data.forEach(year => {
                    const option = document.createElement('option');
                    option.text = year;
                    option.value = year;
                    year_select.appendChild(option);
                });
                year_select.disabled = false;
            });
        } else{
            year_select.disabled = true;
        }
    });

    </script>

{% endblock %}
