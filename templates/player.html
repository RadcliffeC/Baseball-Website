{% extends "base.html" %}

{% block title %}{{ player.nameFirst }} {{ player.nameLast }} | Player Profile{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1>{{ player.nameFirst }} {{ player.nameLast }}</h1>

    {% if player.nameGiven %}
        <p><strong>Given Name:</strong> {{ player.nameGiven }}</p>
    {% endif %}
    <p><strong>Born:</strong>
        {% if player.birthYear %}{{ player.birthMonth }}/{{ player.birthDay }}/{{ player.birthYear }}{% else %}N/A{% endif %}
    </p>
    {% if player.deathYear %}
        <p><strong>Died:</strong> {{ player.deathMonth }}/{{ player.deathDay }}/{{ player.deathYear }}</p>
    {% endif %}
    <p><strong>Bats:</strong> {{ player.bats or 'N/A' }}</p>
    <p><strong>Throws:</strong> {{ player.throws or 'N/A' }}</p>
    <p><strong>Height:</strong> {{ player.height or 'N/A' }} inches</p>
    <p><strong>Weight:</strong> {{ player.weight or 'N/A' }} lbs</p>
    <p><strong>Debut:</strong> {{ player.debut or 'N/A' }}</p>
    <p><strong>Final Game:</strong> {{ player.finalGame or 'N/A' }}</p>

    <hr>

    <!-- Batting Career Stats -->
    <h3 class="mt-5">Career Batting Stats</h3>
    {% if batting %}
        <div class="table-responsive">
            <table id="battingTable" class="table table-bordered table-striped">
                <thead class="table-dark">
                    <tr>
                        <th>Year</th><th>Team</th><th>G</th><th>AB</th><th>R</th><th>H</th><th>2B</th><th>3B</th>
                        <th>HR</th><th>RBI</th><th>SB</th><th>CS</th><th>BB</th><th>SO</th>
                        <th>IBB</th><th>HBP</th><th>SH</th><th>SF</th><th>GIDP</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in batting %}
                        <tr>
                            <td>{{ row[1] }}</td>
                            <td>
                                <a href="{{ url_for('pages.teams', team_name=row[0]) }}?year={{ row[1] }}">
                                    {{ row[2] }}
                                </a>
                            </td>
                            {% for cell in row[3:] %}
                                <td>{{ cell }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p>No batting stats available.</p>
    {% endif %}

    <!-- Pitching Career Stats -->
    <h3 class="mt-5">Career Pitching Stats</h3>
    {% if pitching %}
        <div class="table-responsive">
            <table id="pitchingTable" class="table table-bordered table-striped">
                <thead class="table-dark">
                    <tr>
                        <th>Year</th><th>Team</th><th>W</th><th>L</th><th>G</th><th>GS</th><th>CG</th><th>SHO</th><th>SV</th>
                        <th>IPOuts</th><th>H</th><th>ER</th><th>HR</th><th>BB</th><th>SO</th><th>BAOpp</th>
                        <th>ERA</th><th>IBB</th><th>WP</th><th>HBP</th><th>BK</th><th>BFP</th><th>GF</th>
                        <th>R</th><th>SH</th><th>SF</th><th>GIDP</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in pitching %}
                         <tr>
                            <td>{{ row[1] }}</td>
                            <td>
                                <a href="{{ url_for('pages.teams', team_name=row[0]) }}?year={{ row[1] }}">
                                    {{ row[2] }}
                                </a>
                            </td>
                            {% for cell in row[3:] %}
                                <td>{{ cell }}</td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p>No pitching stats available.</p>
    {% endif %}

</div>

<!-- DataTables Initialization -->
<script>
$(document).ready(function() {
    $('#battingTable').DataTable({
        paging: false,
        info: false,
        searching: false,
        order: []
    });

    $('#pitchingTable').DataTable({
        paging: false,
        info: false,
        searching: false,
        order: []
    });
});
</script>
{% endblock %}
